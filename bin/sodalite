#!/bin/bash  


function reset {
    # enable control flow keys
    stty ixany 2> /dev/null
}

trap reset SIGINT SIGTERM

# disable control flow keys
stty -ixon 2> /dev/null

## set up environment
APPNAME=sodalite
LIB_DIR="${LIB_DIR:-$(dirname $(readlink -f "$0"))/../sodalite}"

CWD_PIPE=$(mktemp -u "${TMPDIR:-/tmp/}$(basename $0).XXXXXXXX")
mkfifo $CWD_PIPE
trap "rm -f $CWD_PIPE" EXIT
exec 3< <(read line <$CWD_PIPE; echo $line)

export CWD_PIPE
python3 $LIB_DIR/main.py < /dev/tty > /dev/tty

read <&3 line
[ $line ] && echo "$line"

